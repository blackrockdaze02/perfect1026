<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        /* 
            闭包：
                如何产生：
                    1.函数嵌套函数
                    2.内部函数引用外部函数的变量
                    3.外部函数执行

                闭包的另外一个理解：
                    包含被引用变量的closure对象，叫做闭包，在嵌套的内部函数中

                闭包的作用：
                    延长了局部变量的生命周期
                    在全局中可以间接的操作局部变量
                
                闭包的生命周期：
                    出生：外部函数调用，内部函数声明提升后定义完成就出现了闭包
                    死亡：当内部函数没有被引用的时候，变成垃圾对象的时候，闭包消失
                
                闭包的缺点：
                    内部的变量长期占用内存空间，可能会导致内存泄漏
                缺点的解决方案：
                    减少使用闭包
                    手动释放闭包，将内部函数的引用取消掉

        */

        var b = 2;

        function fn() {
            // debugger;
            var a = 1;

            function fn2() {
                a++;
                console.log(a);
            }
            return fn2;
        }

        var re = fn();
        re(); //2
        re(); //3
        re(); //4
        re(); //5
        re = null;


        var re2 = fn();
        re2(); //2
        re2(); //3

        re(); //6
        re2 = null;
    </script>
</body>

</html>